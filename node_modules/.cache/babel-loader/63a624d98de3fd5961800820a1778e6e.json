{"ast":null,"code":"import _slicedToArray from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef}from'react';import{useDrag,useDrop}from'react-dnd';import{ItemTypes}from'./ItemTypes.js';import Image from\"react-bootstrap/Image\";import style from\"./favorites.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var myStyle={padding:\"10px\",marginBottom:\"0.5rem\",backgroundColor:\"white\"};export var Card=function Card(_ref){var id=_ref.id,movie=_ref.movie,index=_ref.index,moveCard=_ref.moveCard;var ref=useRef(null);var _useDrop=useDrop({accept:ItemTypes.CARD,collect:function collect(monitor){return{handlerId:monitor.getHandlerId()};},hover:function hover(item,monitor){var _ref$current;if(!ref.current){return;}var dragIndex=item.index;var hoverIndex=index;// Don't replace items with themselves\nif(dragIndex===hoverIndex){return;}// Determine rectangle on screen\nvar hoverBoundingRect=(_ref$current=ref.current)===null||_ref$current===void 0?void 0:_ref$current.getBoundingClientRect();// Get vertical middle\nvar hoverMiddleY=(hoverBoundingRect.bottom-hoverBoundingRect.top)/2;// Determine mouse position\nvar clientOffset=monitor.getClientOffset();// Get pixels to the top\nvar hoverClientY=clientOffset.y-hoverBoundingRect.top;// Only perform the move when the mouse has crossed half of the items height\n// When dragging downwards, only move when the cursor is below 50%\n// When dragging upwards, only move when the cursor is above 50%\n// Dragging downwards\nif(dragIndex<hoverIndex&&hoverClientY<hoverMiddleY){return;}// Dragging upwards\nif(dragIndex>hoverIndex&&hoverClientY>hoverMiddleY){return;}// Time to actually perform the action\nmoveCard(dragIndex,hoverIndex);// Note: we're mutating the monitor item here!\n// Generally it's better to avoid mutations,\n// but it's good here for the sake of performance\n// to avoid expensive index searches.\nitem.index=hoverIndex;}}),_useDrop2=_slicedToArray(_useDrop,2),handlerId=_useDrop2[0].handlerId,drop=_useDrop2[1];var _useDrag=useDrag({type:ItemTypes.CARD,item:function item(){return{id:id,index:index};},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1];var opacity=isDragging?0:1;drag(drop(ref));return/*#__PURE__*/_jsx(\"div\",{style:myStyle,children:/*#__PURE__*/_jsxs(\"div\",{className:\"favoritesCard card\",ref:ref,\"data-handler-id\":handlerId,children:[/*#__PURE__*/_jsx(\"div\",{className:\"favoritesNumber favoritesNumberOneDigit\",children:index}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Image,{className:\"card-img favoritesPoster\",src:movie.poster+\"/100px180\",onError:function onError(e){e.target.src='/images/NoPosterAvailable-crop.jpeg';},fluid:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"favoritesTitle\",children:movie.title})]})});};","map":{"version":3,"names":["React","useRef","useDrag","useDrop","ItemTypes","Image","style","myStyle","padding","marginBottom","backgroundColor","Card","id","movie","index","moveCard","ref","accept","CARD","collect","monitor","handlerId","getHandlerId","hover","item","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","drop","type","isDragging","drag","opacity","poster","e","target","src","title"],"sources":["/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/src/components/FavoriteCard.js"],"sourcesContent":["import React, { useRef } from 'react'\nimport { useDrag, useDrop } from 'react-dnd'\nimport { ItemTypes } from './ItemTypes.js'\nimport Image from \"react-bootstrap/Image\";\nimport style from \"./favorites.css\"\n\nconst myStyle = {\n    padding: \"10px\", \n    marginBottom: \"0.5rem\",\n     backgroundColor: \"white\" \n}\nexport const Card = ({ id, movie, index, moveCard }) => {\n    const ref = useRef(null)\n    const [{ handlerId }, drop] = useDrop({\n        accept: ItemTypes.CARD,\n        collect(monitor) {\n            return {\n                handlerId: monitor.getHandlerId(),\n            }\n        },\n        hover(item, monitor) {\n            if (!ref.current) {\n                return\n            }\n            const dragIndex = item.index\n            const hoverIndex = index\n            // Don't replace items with themselves\n            if (dragIndex === hoverIndex) {\n                return\n            }\n            // Determine rectangle on screen\n            const hoverBoundingRect = ref.current?.getBoundingClientRect()\n            // Get vertical middle\n            const hoverMiddleY =\n                (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n            // Determine mouse position\n            const clientOffset = monitor.getClientOffset()\n            // Get pixels to the top\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top\n            // Only perform the move when the mouse has crossed half of the items height\n            // When dragging downwards, only move when the cursor is below 50%\n            // When dragging upwards, only move when the cursor is above 50%\n            // Dragging downwards\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return\n            }\n            // Dragging upwards\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return\n            }\n            // Time to actually perform the action\n            moveCard(dragIndex, hoverIndex)\n            // Note: we're mutating the monitor item here!\n            // Generally it's better to avoid mutations,\n            // but it's good here for the sake of performance\n            // to avoid expensive index searches.\n            item.index = hoverIndex\n        },\n    })\n    const [{ isDragging }, drag] = useDrag({\n        type: ItemTypes.CARD,\n        item: () => {\n            return { id, index }\n        },\n        collect: (monitor) => ({\n            isDragging: monitor.isDragging(),\n        }),\n    })\n    const opacity = isDragging ? 0 : 1\n    drag(drop(ref))\n    return (\n        <div style={myStyle}>\n            <div className=\"favoritesCard card\" ref={ref} data-handler-id={handlerId}>\n                <div className=\"favoritesNumber favoritesNumberOneDigit\">{index}</div>\n                <div>\n                    <Image\n                        className=\"card-img favoritesPoster\"\n                        src={movie.poster + \"/100px180\"}\n                        onError={(e) => {\n                            e.target.src = '/images/NoPosterAvailable-crop.jpeg'\n                        }}\n                        fluid />\n                </div>\n                <div className=\"favoritesTitle\">\n                    {movie.title}\n                </div>\n            </div>\n            </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
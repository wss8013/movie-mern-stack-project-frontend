{"ast":null,"code":"import _slicedToArray from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import MovieDataService from\"../services/movies\";import{useNavigate,useParams}from\"react-router-dom\";import Form from\"react-bootstrap/Form\";import Button from'react-bootstrap/Button';import Container from'react-bootstrap/Container';import{useLocation}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AddReview=function AddReview(_ref){var user=_ref.user;var navigate=useNavigate();var params=useParams();var editing=false;var initialReviewState=\"\";var location=useLocation();// initialReviewState will have a different value\n// if we're editing an existing review\nvar _useState=useState(initialReviewState),_useState2=_slicedToArray(_useState,2),review=_useState2[0],setReview=_useState2[1];var onChangeReview=function onChangeReview(e){var review=e.target.value;setReview(review);};if(location.state&&location.state.currentReview){editing=true;}var saveReview=function saveReview(){var data={review:review,name:user.name,user_id:user.googleId,movie_id:params.id// get movie id from url\n};if(editing){data.review_id=location.state.currentReview._id;MovieDataService.updateReview(data).then(function(Response){navigate(\"/movies/\"+params.id);}).catch(function(e){console.log(e);});}else{MovieDataService.createReview(data).then(function(Response){navigate(\"/movies/\"+params.id);}).catch(function(e){console.log(e);});}};return/*#__PURE__*/_jsx(Container,{className:\"main-container\",children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[editing?\"Edit\":\"Create\",\" Review\"]}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",type:\"text\",required:true,review:review,onChange:onChangeReview,defaultValue:editing?null:\"\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:saveReview,children:\"Submit\"})]})});};export default AddReview;","map":{"version":3,"names":["React","useState","useEffect","MovieDataService","useNavigate","useParams","Form","Button","Container","useLocation","AddReview","user","navigate","params","editing","initialReviewState","location","review","setReview","onChangeReview","e","target","value","state","currentReview","saveReview","data","name","user_id","googleId","movie_id","id","review_id","_id","updateReview","then","Response","catch","console","log","createReview"],"sources":["/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/src/components/AddReview.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MovieDataService from \"../services/movies\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport { useLocation } from 'react-router-dom';\n\nconst AddReview = ({ user }) => {\n    const navigate = useNavigate();\n    let params = useParams();\n\n    let editing = false;\n    let initialReviewState = \"\";\n    let location = useLocation();\n\n    // initialReviewState will have a different value\n    // if we're editing an existing review\n    const [review, setReview] = useState(initialReviewState);\n    const onChangeReview = e => {\n        const review = e.target.value;\n        setReview(review);\n    }\n\n    if (location.state && location.state.currentReview) {\n        editing = true;\n    }\n\n\n    const saveReview = () => {\n        var data = {\n            review: review,\n            name: user.name,\n            user_id: user.googleId,\n            movie_id: params.id // get movie id from url\n        }\n\n        if (editing) {\n            data.review_id = location.state.currentReview._id;\n            MovieDataService.updateReview(data)\n                .then(Response => {\n                    navigate(\"/movies/\" + params.id)\n                })\n                .catch(e => {\n                    console.log(e);\n                });\n\n        } else {\n            MovieDataService.createReview(data)\n                .then(Response => {\n                    navigate(\"/movies/\" + params.id)\n                })\n                .catch(e => {\n                    console.log(e);\n                });\n        }\n    }\n\n    return (\n        <Container className=\"main-container\">\n            <Form>\n                <Form.Group className=\"mb-3\">\n                    <Form.Label>{editing ? \"Edit\" : \"Create\"} Review</Form.Label>\n                    <Form.Control\n                        as=\"textarea\"\n                        type=\"text\"\n                        required\n                        review={review}\n                        onChange={onChangeReview}\n                        defaultValue={editing ? null : \"\"}\n                    />\n                </Form.Group>\n                <Button variant=\"primary\" onClick={saveReview}>\n                    Submit\n                </Button>\n            </Form>\n        </Container>\n    )\n}\n\nexport default AddReview;"],"mappings":"iLAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,iBAAP,KAA6B,oBAA7B,CACA,OAASC,WAAT,CAAsBC,SAAtB,KAAuC,kBAAvC,CACA,MAAOC,KAAP,KAAiB,sBAAjB,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,MAAOC,UAAP,KAAsB,2BAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,MAAc,IAAXC,KAAW,MAAXA,IAAW,CAC5B,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CACA,GAAIS,OAAM,CAAGR,SAAS,EAAtB,CAEA,GAAIS,QAAO,CAAG,KAAd,CACA,GAAIC,mBAAkB,CAAG,EAAzB,CACA,GAAIC,SAAQ,CAAGP,WAAW,EAA1B,CAEA;AACA;AACA,cAA4BR,QAAQ,CAACc,kBAAD,CAApC,wCAAOE,MAAP,eAAeC,SAAf,eACA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,CAAAC,CAAC,CAAI,CACxB,GAAMH,OAAM,CAAGG,CAAC,CAACC,MAAF,CAASC,KAAxB,CACAJ,SAAS,CAACD,MAAD,CAAT,CACH,CAHD,CAKA,GAAID,QAAQ,CAACO,KAAT,EAAkBP,QAAQ,CAACO,KAAT,CAAeC,aAArC,CAAoD,CAChDV,OAAO,CAAG,IAAV,CACH,CAGD,GAAMW,WAAU,CAAG,QAAbA,WAAa,EAAM,CACrB,GAAIC,KAAI,CAAG,CACPT,MAAM,CAAEA,MADD,CAEPU,IAAI,CAAEhB,IAAI,CAACgB,IAFJ,CAGPC,OAAO,CAAEjB,IAAI,CAACkB,QAHP,CAIPC,QAAQ,CAAEjB,MAAM,CAACkB,EAAG;AAJb,CAAX,CAOA,GAAIjB,OAAJ,CAAa,CACTY,IAAI,CAACM,SAAL,CAAiBhB,QAAQ,CAACO,KAAT,CAAeC,aAAf,CAA6BS,GAA9C,CACA9B,gBAAgB,CAAC+B,YAAjB,CAA8BR,IAA9B,EACKS,IADL,CACU,SAAAC,QAAQ,CAAI,CACdxB,QAAQ,CAAC,WAAaC,MAAM,CAACkB,EAArB,CAAR,CACH,CAHL,EAIKM,KAJL,CAIW,SAAAjB,CAAC,CAAI,CACRkB,OAAO,CAACC,GAAR,CAAYnB,CAAZ,EACH,CANL,EAQH,CAVD,IAUO,CACHjB,gBAAgB,CAACqC,YAAjB,CAA8Bd,IAA9B,EACKS,IADL,CACU,SAAAC,QAAQ,CAAI,CACdxB,QAAQ,CAAC,WAAaC,MAAM,CAACkB,EAArB,CAAR,CACH,CAHL,EAIKM,KAJL,CAIW,SAAAjB,CAAC,CAAI,CACRkB,OAAO,CAACC,GAAR,CAAYnB,CAAZ,EACH,CANL,EAOH,CACJ,CA3BD,CA6BA,mBACI,KAAC,SAAD,EAAW,SAAS,CAAC,gBAArB,uBACI,MAAC,IAAD,yBACI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACI,MAAC,IAAD,CAAM,KAAN,YAAaN,OAAO,CAAG,MAAH,CAAY,QAAhC,aADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,EAAE,CAAC,UADP,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,KAHZ,CAII,MAAM,CAAEG,MAJZ,CAKI,QAAQ,CAAEE,cALd,CAMI,YAAY,CAAEL,OAAO,CAAG,IAAH,CAAU,EANnC,EAFJ,GADJ,cAYI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAEW,UAAnC,oBAZJ,GADJ,EADJ,CAoBH,CAtED,CAwEA,cAAef,UAAf"},"metadata":{},"sourceType":"module"}
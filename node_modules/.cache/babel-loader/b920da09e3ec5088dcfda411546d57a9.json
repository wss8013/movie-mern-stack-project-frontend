{"ast":null,"code":"import _objectSpread from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import MovieDataService from\"../services/movies\";import{useNavigate,Link,useParams}from'react-router-dom';import Col from'react-bootstrap/Col';import Row from'react-bootstrap/Row';import Container from'react-bootstrap/Container';import Card from'react-bootstrap/Card';import Image from\"react-bootstrap/Image\";import Button from\"react-bootstrap/Button\";import moment from\"moment\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Favorites=function Favorites(_ref){var user=_ref.user;var params=useParams();useEffect(function(){var getMovie=function getMovie(id){MovieDataService.findById(id).then(function(response){console.log(response.data);setMovie(response.data);}).catch(function(e){console.log(e);});};getMovie(params.id);},[params.id]);var deleteReview=function deleteReview(review,index){var data={review_id:review._id,user_id:user.googleId};MovieDataService.deleteReview(data).then(function(response){setMovie(function(previousState){previousState.reviews.splice(index,1);return _objectSpread({},previousState);});}).catch(function(e){console.log(e);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Card,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Reviews\"}),/*#__PURE__*/_jsx(\"br\",{}),movie.reviews.map(function(review,index){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 reviewText\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[review.name+\" reviewed on \",\" \",moment(review.date).format(\"Do MMMM YYYY\")]}),/*#__PURE__*/_jsx(\"p\",{className:\"review\",children:review.review}),user&&user.googleId===review.user_id&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/movies/\"+params.id+\"/review\"},state:{currentReview:review},children:\"Edit\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){deleteReview(review,index);},children:\"delete\"})})]})]})});})]})]})})});};export default Favorites;","map":{"version":3,"names":["React","useState","useEffect","MovieDataService","useNavigate","Link","useParams","Col","Row","Container","Card","Image","Button","moment","axios","Favorites","user","params","getMovie","id","findById","then","response","console","log","data","setMovie","catch","e","deleteReview","review","index","review_id","_id","user_id","googleId","previousState","reviews","splice","movie","map","name","date","format","pathname","currentReview"],"sources":["/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/src/components/Favorites.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport MovieDataService from \"../services/movies\";\nimport { useNavigate, Link, useParams } from 'react-router-dom';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Image from \"react-bootstrap/Image\";\nimport Button from \"react-bootstrap/Button\";\nimport moment from \"moment\";\nimport axios from \"axios\";\n\nconst Favorites = ({ user }) => {\n    let params = useParams();\n\n\n\n    useEffect(() => {\n        const getMovie = id => {\n            MovieDataService.findById(id)\n                .then(response => {\n                    console.log(response.data);\n                    setMovie(response.data);\n                }).catch(e => {\n                    console.log(e);\n                })\n\n        }\n        getMovie(params.id);\n    }, [params.id]);\n    \n    const deleteReview = (review, index) => {\n        var data = {\n            review_id: review._id,\n            user_id: user.googleId,\n        }\n        MovieDataService.deleteReview(data)\n            .then(response => {\n                setMovie((previousState)=> {\n                    previousState.reviews.splice(index,1);\n                    return ({\n                        ...previousState\n                    })\n                })\n            })\n            .catch(e => {\n                console.log(e);\n            });\n    };\n\n    return (\n        <div>\n            <Container>\n                <Row>\n                    <Col>\n                    </Col>\n                    <Col>\n                        <Card>\n                            \n                        </Card>\n                        <h2>\n                            Reviews\n                        </h2>\n                        <br></br>\n                        {movie.reviews.map((review, index) => {\n                            return (\n                                <div className=\"d-flex\">\n                                    <div className=\"flex-shrink-0 reviewText\">\n                                        <h5>{review.name + \" reviewed on \"} {moment(review.date).format(\"Do MMMM YYYY\")}</h5>\n                                        <p className=\"review\">{review.review}</p>\n                                        {user && user.googleId === review.user_id &&\n                                            <Row>\n                                                <Col>\n                                                    <Link to={{\n                                                        pathname: \"/movies/\" + params.id + \"/review\"\n                                                    }}\n                                                        state={{\n                                                            currentReview: review\n                                                        }}>\n                                                        Edit\n                                                    </Link>\n                                                </Col>\n                                                <Col>\n                                                    <Button variant=\"link\" onClick={() => {\n                                                        deleteReview(review, index);\n                                                    }}>\n                                                        delete\n                                                    </Button>\n                                                </Col>\n                                            </Row>\n                                        }\n                                    </div>\n                                </div>\n                            )\n                        })}\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    );\n}\n\nexport default Favorites;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
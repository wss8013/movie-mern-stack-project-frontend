{"ast":null,"code":"import _slicedToArray from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import update from\"immutability-helper\";import{useCallback,useState,useEffect}from\"react\";import{Card}from\"./FavoriteCard.js\";import style from\"./favorites.css\";import FavoritesDataService from\"../services/favorites\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var mStyle={width:500,margin:1};var addMoviesIndex=function addMoviesIndex(favorites,movies){var moviesWithIndex=[];for(var i=0;i<favorites.length;i++){for(var j=0;j<movies.legnth;j++){console.error(favorites[i]+\"   \"+movies[j]._id);if(favorites[i]==movies[j]._id){movies[j].index=i;moviesWithIndex.push(movies);}}}return moviesWithIndex;};var FavoriteContainer=function FavoriteContainer(_ref){var user=_ref.user,favorites=_ref.favorites,addFavorite=_ref.addFavorite,deleteFavorite=_ref.deleteFavorite;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState([favorites]),_useState4=_slicedToArray(_useState3,2),myFavorites=_useState4[0],setMyFavorites=_useState4[1];useEffect(function(){var getMovie=function getMovie(favorites){FavoritesDataService.getFavoriteListByMovieIds(favorites).then(function(response){var movies=addMoviesIndex(favorites,response.data.movies);console.error(movies);setMovies(movies);}).catch(function(e){console.log(e);});};getMovie(favorites);setMyFavorites(favorites);},[favorites]);var moveCard=useCallback(function(dragIndex,hoverIndex){setMovies(function(prevMovies){return update(prevMovies,{$splice:[[dragIndex,1],[hoverIndex,0,prevMovies[dragIndex]]]});});setMyFavorites(function(prevMyFavorites){return update(prevMyFavorites,{$splice:[[dragIndex,1],[hoverIndex,0,prevMyFavorites[dragIndex]]]});});},[]);var renderCard=useCallback(function(movie,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Card,{index:index,id:movie._id,movie:movie,moveCard:moveCard},movie._id)});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"favoritesContainer container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"favoritesPanel\",children:\"Drag your favorites to rank them\"}),/*#__PURE__*/_jsx(\"div\",{children:movies.map(function(movie,i){return renderCard(movie,movie.index);})})]});};export default FavoriteContainer;","map":{"version":3,"names":["update","useCallback","useState","useEffect","Card","style","FavoritesDataService","mStyle","width","margin","addMoviesIndex","favorites","movies","moviesWithIndex","i","length","j","legnth","console","error","_id","index","push","FavoriteContainer","user","addFavorite","deleteFavorite","setMovies","myFavorites","setMyFavorites","getMovie","getFavoriteListByMovieIds","then","response","data","catch","e","log","moveCard","dragIndex","hoverIndex","prevMovies","$splice","prevMyFavorites","renderCard","movie","map"],"sources":["/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/src/components/Container.js"],"sourcesContent":["import update from \"immutability-helper\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { Card } from \"./FavoriteCard.js\";\nimport style from \"./favorites.css\"\nimport FavoritesDataService from \"../services/favorites\";\nconst mStyle = {\n  width: 500,\n  margin: 1\n}\nconst addMoviesIndex = (favorites,movies) => {\n let moviesWithIndex = [];\n for(let i = 0;i<favorites.length;i++) {\n  for(let j = 0;j < movies.legnth;j++) {\n    console.error(favorites[i] + \"   \"+ movies[j]._id);\n    if(favorites[i] == movies[j]._id) {\n      movies[j].index = i;\n      moviesWithIndex.push(movies);\n    }\n  }\n }\n return moviesWithIndex;\n\n};\nconst FavoriteContainer = ({\n  user,\n  favorites,\n  addFavorite,\n  deleteFavorite\n}) => {\n  const [movies, setMovies] = useState([]);\n  const [myFavorites,setMyFavorites] = useState([favorites]);\n  useEffect(() => {\n    const getMovie = favorites => {\n      FavoritesDataService.getFavoriteListByMovieIds(favorites)\n        .then(response => {\n         let  movies =  addMoviesIndex(favorites, response.data.movies);\n          console.error(movies);\n          setMovies(movies);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n    getMovie(favorites);\n    setMyFavorites(favorites);\n  }, [favorites]);\n\n\n  const moveCard = useCallback((dragIndex, hoverIndex) => {\n    setMovies((prevMovies) =>\n      update(prevMovies, {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, prevMovies[dragIndex]]\n        ]\n      })\n    );\n    setMyFavorites((prevMyFavorites) =>\n      update(prevMyFavorites, {\n        $splice: [\n          [dragIndex, 1],\n          [hoverIndex, 0, prevMyFavorites[dragIndex]]\n        ]\n      })\n    );\n  }, []);\n  const renderCard = useCallback((movie, index) => {\n    return (\n      <div>\n        <Card\n          key={movie._id}\n          index={index}\n          id={movie._id}\n          movie={movie}\n          moveCard={moveCard}\n        />\n      </div>\n    );\n  }, []);\n\n  return (\n    <div className=\"favoritesContainer container\">\n      <div className=\"favoritesPanel\">\n        Drag your favorites to rank them\n      </div>\n      <div>\n        {movies.map((movie,i) => renderCard(movie, movie.index))}\n      </div>\n    </div>\n  );\n\n};\nexport default FavoriteContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
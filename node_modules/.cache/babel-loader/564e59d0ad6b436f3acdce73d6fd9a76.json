{"ast":null,"code":"import _objectSpread from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef}from'react';import{useDrag,useDrop}from'react-dnd';import{ItemTypes}from'./ItemTypes.js';import{jsx as _jsx}from\"react/jsx-runtime\";var style={border:'1px dashed gray',padding:'0.5rem 1rem',marginBottom:'.5rem',backgroundColor:'white',cursor:'move'};export var Card=function Card(_ref){var index=_ref.index,movieTitle=_ref.movieTitle,moviePoster=_ref.moviePoster,movieId=_ref.movieId,moveCard=_ref.moveCard;var ref=useRef(null);var _useDrop=useDrop({accept:ItemTypes.CARD,collect:function collect(monitor){return{handlerId:monitor.getHandlerId()};},hover:function hover(item,monitor){var _ref$current;if(!ref.current){return;}var dragIndex=item.index;var hoverIndex=index;// Don't replace items with themselves\nif(dragIndex===hoverIndex){return;}// Determine rectangle on screen\nvar hoverBoundingRect=(_ref$current=ref.current)===null||_ref$current===void 0?void 0:_ref$current.getBoundingClientRect();// Get vertical middle\nvar hoverMiddleY=(hoverBoundingRect.bottom-hoverBoundingRect.top)/2;// Determine mouse position\nvar clientOffset=monitor.getClientOffset();// Get pixels to the top\nvar hoverClientY=clientOffset.y-hoverBoundingRect.top;// Only perform the move when the mouse has crossed half of the items height\n// When dragging downwards, only move when the cursor is below 50%\n// When dragging upwards, only move when the cursor is above 50%\n// Dragging downwards\nif(dragIndex<hoverIndex&&hoverClientY<hoverMiddleY){return;}// Dragging upwards\nif(dragIndex>hoverIndex&&hoverClientY>hoverMiddleY){return;}// Time to actually perform the action\nmoveCard(dragIndex,hoverIndex);// Note: we're mutating the monitor item here!\n// Generally it's better to avoid mutations,\n// but it's good here for the sake of performance\n// to avoid expensive index searches.\nitem.index=hoverIndex;}}),_useDrop2=_slicedToArray(_useDrop,2),handlerId=_useDrop2[0].handlerId,drop=_useDrop2[1];var _useDrag=useDrag({type:ItemTypes.CARD,item:function item(){return{movieId:movieId,index:index};},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1];var opacity=isDragging?0:1;drag(drop(ref));return/*#__PURE__*/_jsx(\"div\",{ref:ref,style:_objectSpread(_objectSpread({},style),{},{opacity:opacity}),\"data-handler-id\":handlerId,children:movieId+movieTitle});};","map":{"version":3,"names":["useRef","useDrag","useDrop","ItemTypes","style","border","padding","marginBottom","backgroundColor","cursor","Card","index","movieTitle","moviePoster","movieId","moveCard","ref","accept","CARD","collect","monitor","handlerId","getHandlerId","hover","item","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","drop","type","isDragging","drag","opacity"],"sources":["/Users/shashawang/Desktop/NEU2022Summer/Web5610/classRepo-MERN-project/shasha-wang-frontend/src/components/FavoriteCard.js"],"sourcesContent":["import { useRef } from 'react'\nimport { useDrag, useDrop } from 'react-dnd'\nimport { ItemTypes } from './ItemTypes.js'\n\nconst style = {\n  border: '1px dashed gray',\n  padding: '0.5rem 1rem',\n  marginBottom: '.5rem',\n  backgroundColor: 'white',\n  cursor: 'move',\n}\nexport const Card = ({ index, movieTitle, moviePoster, movieId, moveCard }) => {\n  const ref = useRef(null)\n  const [{ handlerId }, drop] = useDrop({\n    accept: ItemTypes.CARD,\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      }\n    },\n    hover(item, monitor) {\n      if (!ref.current) {\n        return\n      }\n      const dragIndex = item.index\n      const hoverIndex = index\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return\n      }\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect()\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset()\n      // Get pixels to the top\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return\n      }\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return\n      }\n      // Time to actually perform the action\n      moveCard(dragIndex, hoverIndex)\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex\n    },\n  })\n  const [{ isDragging }, drag] = useDrag({\n    type: ItemTypes.CARD,\n    item: () => {\n      return { movieId, index }\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const opacity = isDragging ? 0 : 1\n  drag(drop(ref))\n  return (\n    <div ref={ref} style={{ ...style, opacity }} data-handler-id={handlerId}>\n      {movieId + movieTitle}\n    </div>\n  )\n}\n"],"mappings":"iWAAA,OAASA,MAAT,KAAuB,OAAvB,CACA,OAASC,OAAT,CAAkBC,OAAlB,KAAiC,WAAjC,CACA,OAASC,SAAT,KAA0B,gBAA1B,C,2CAEA,GAAMC,MAAK,CAAG,CACZC,MAAM,CAAE,iBADI,CAEZC,OAAO,CAAE,aAFG,CAGZC,YAAY,CAAE,OAHF,CAIZC,eAAe,CAAE,OAJL,CAKZC,MAAM,CAAE,MALI,CAAd,CAOA,MAAO,IAAMC,KAAI,CAAG,QAAPA,KAAO,MAA2D,IAAxDC,MAAwD,MAAxDA,KAAwD,CAAjDC,UAAiD,MAAjDA,UAAiD,CAArCC,WAAqC,MAArCA,WAAqC,CAAxBC,OAAwB,MAAxBA,OAAwB,CAAfC,QAAe,MAAfA,QAAe,CAC7E,GAAMC,IAAG,CAAGhB,MAAM,CAAC,IAAD,CAAlB,CACA,aAA8BE,OAAO,CAAC,CACpCe,MAAM,CAAEd,SAAS,CAACe,IADkB,CAEpCC,OAFoC,kBAE5BC,OAF4B,CAEnB,CACf,MAAO,CACLC,SAAS,CAAED,OAAO,CAACE,YAAR,EADN,CAAP,CAGD,CANmC,CAOpCC,KAPoC,gBAO9BC,IAP8B,CAOxBJ,OAPwB,CAOf,kBACnB,GAAI,CAACJ,GAAG,CAACS,OAAT,CAAkB,CAChB,OACD,CACD,GAAMC,UAAS,CAAGF,IAAI,CAACb,KAAvB,CACA,GAAMgB,WAAU,CAAGhB,KAAnB,CACA;AACA,GAAIe,SAAS,GAAKC,UAAlB,CAA8B,CAC5B,OACD,CACD;AACA,GAAMC,kBAAiB,eAAGZ,GAAG,CAACS,OAAP,uCAAG,aAAaI,qBAAb,EAA1B,CACA;AACA,GAAMC,aAAY,CAChB,CAACF,iBAAiB,CAACG,MAAlB,CAA2BH,iBAAiB,CAACI,GAA9C,EAAqD,CADvD,CAEA;AACA,GAAMC,aAAY,CAAGb,OAAO,CAACc,eAAR,EAArB,CACA;AACA,GAAMC,aAAY,CAAGF,YAAY,CAACG,CAAb,CAAiBR,iBAAiB,CAACI,GAAxD,CACA;AACA;AACA;AACA;AACA,GAAIN,SAAS,CAAGC,UAAZ,EAA0BQ,YAAY,CAAGL,YAA7C,CAA2D,CACzD,OACD,CACD;AACA,GAAIJ,SAAS,CAAGC,UAAZ,EAA0BQ,YAAY,CAAGL,YAA7C,CAA2D,CACzD,OACD,CACD;AACAf,QAAQ,CAACW,SAAD,CAAYC,UAAZ,CAAR,CACA;AACA;AACA;AACA;AACAH,IAAI,CAACb,KAAL,CAAagB,UAAb,CACD,CA5CmC,CAAD,CAArC,sCAASN,SAAT,cAASA,SAAT,CAAsBgB,IAAtB,cA8CA,aAA+BpC,OAAO,CAAC,CACrCqC,IAAI,CAAEnC,SAAS,CAACe,IADqB,CAErCM,IAAI,CAAE,eAAM,CACV,MAAO,CAAEV,OAAO,CAAPA,OAAF,CAAWH,KAAK,CAALA,KAAX,CAAP,CACD,CAJoC,CAKrCQ,OAAO,CAAE,iBAACC,OAAD,QAAc,CACrBmB,UAAU,CAAEnB,OAAO,CAACmB,UAAR,EADS,CAAd,EAL4B,CAAD,CAAtC,sCAASA,UAAT,cAASA,UAAT,CAAuBC,IAAvB,cAUA,GAAMC,QAAO,CAAGF,UAAU,CAAG,CAAH,CAAO,CAAjC,CACAC,IAAI,CAACH,IAAI,CAACrB,GAAD,CAAL,CAAJ,CACA,mBACE,YAAK,GAAG,CAAEA,GAAV,CAAe,KAAK,gCAAOZ,KAAP,MAAcqC,OAAO,CAAPA,OAAd,EAApB,CAA6C,kBAAiBpB,SAA9D,UACGP,OAAO,CAAGF,UADb,EADF,CAKD,CAjEM"},"metadata":{},"sourceType":"module"}